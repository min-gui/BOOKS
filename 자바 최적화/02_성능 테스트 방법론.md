


```table-of-contents
```


### 2-1 성능 테스트 종류
---
대부분 부실하게 진행되고, 반쪽 짜리 실험이 될 수 있다. 정량적 질문을 이해하는것이 중요.
애플리케이션 소유자, 고객과 확인하는것이 일반적이다.

- 지연 테스트
	- 사용자가 관심을 갖는 시스템 관찰지표.
	- 고객들이 페이지 로드를 위해 얼마나 기달리고 있는가 ?
	- '자바 가상 머신 성능을 위한 통계' 부분에서 더 자세히 다룰예정.
- 처리량 테스트
	- 지연 테스트 와 이중적인 관계에 있다. 지연테스트 동시 트랜잭션 수를 명확히 제어하는것이 중요. 처리량 테스트는 지연이 관도하게 증가 하지 않도록 주의.
	- 지연 분포가 갑자기 변화하는순간(변곡점)을 찾는것.
- 스트레스 테스트
	- 시스템이 한계치에 도달했을 때 어떻게  반응하고 복구하는지를 확인.
	- 처리량 테스트와 상호 보완 적인 관계
- 용량 계획 테스트
	- 용량 계획 테스트는 비즈니스 목표와 연관 지어 시스템의 장기적인 성능을 관리하고 예측하는 '전략적 활동'
- 성능저하 테스트(부분 실패 테스트)
	- 점진적으로 리소스(CPU, 메모리, 네트워크 대역폭) 제약을 가하여 시스템이 어떻게 성능을 잃어가는지 확인 하는 테스트
	- 카오스 몽키 - 넷플릭스 프로젝트에서 유래
### 2-2 모범 사례 개론
---
- 중요한 요소가 무엇인지 파악, 이것을 측정
- 중요한 것 먼저 최적화
- 가장큰영향 최적화 
	- 즉 중요한 부분 찾고 최적화 해야 한다.

-  탑다운 성능
	- 애플리케이션 전체 성능 동작을 분석하는 접근방식.

-  테스트 환경 생성
	- 우리는 보통 실제 운영과 같은환경에서 테스트를 지향했다.
	- 책에서도 운영테스트와 비슷하게 구축하기를 지향한다. 요즘엔 클라우드 환경으로 테스트 환경을 보다 손쉽게 구성 할 수 있다.
- 성능 요구사항 식별
	- 비기능 요구 사향 (NFRs) : 관찰 가능한 지표
	- 누구나 쉽게 이해해야 합니다.
		- 95% 기준 트랜잭션 시간 을 100ms 줄이기
		- 현재 하드웨어로 처리량을 5배 높이기
		- 지연시간 10밀리초 단축해 고객 이탈 비율 줄이기
- 소프트웨어 개발 수명 주기와 성능 테스트
	- 성능 저하 테스트를 소프트웨어 개발 수명주기의 중요한 부분으로 인식하고 지속적으로 수행.
- 자바 특유의 문제들
	- 메모리 역역의 동적 튜닝과 JIT 컴파일이 대표적.
	- 자바 가상머신은 메서드를 분석해 JIT컴파일 후보를 자동으로 선정, JIT 컴파일에 대상이 되지 않는경우 는 아래일 것이다.
		- 메서드가 자주 실행 되지 않는다.
		- 메서드가 너무 크거나 복잡하여 컴파일을 위한 분석이 불가능하다.(전자 보달 덜 발생)

### 2-3 성능 안티 패턴의 원인
---
- 반짝이는 것에 한눈팔기
- 입에서 입으로 전해지는 방식으로 조정하기.
- 개발자 들이 잘못 결정을 내리는 5가지

- 지루함
	- Collections.sort()처럼 간단한 기능으로 충분한 경우에도 직접 정렬 알고리즘을 작성하는 식.
- 이력 부풀리기
	- 과도한 기술 사용 이력서 추가를위한. cc. 공부하고 알고는 있되 기술 사용은 신중하게 필요한 기술만 사용하자.
- 사회적 압박
	- 개발속도를 중시하는 분위기에서 발생가능성이 높다.
- 이해 부족
	- 도입기술의 이해부족 예를들어 하이버네이트를 충분히 이해하지 않고 사용하는건 시스템의 복잡성을 더한다.
- 문제에 대한 오해 또는 문제 자체의 부제
	- 문제 자체를 제대로 파악하지 않은 상태에서 해결책이 제시되는 경우가 있다. 불확실한 점이 있으면 프로토 타입으로 검증 필요하다.